$enemy-sheet-left-right-padding: 0.4rem;
$font-weight-bold: 700;
$font-weight-half-bold: 500;
$font-weight-normal: 400;
$label-value-gap: 0.4em;

.sheet-window {
  min-width: 588px;
}

.window-content.sheet {
  overflow: auto;
  min-width: 550px;
}

.enemy-sheet {
  background: #f7f4ed;
  color: #222;
  font-family: 'Segoe UI', Arial, sans-serif;
  font-size: 1rem;
  border-radius: 6px;
  box-shadow: 0 4px 20px #0003;
  padding: 0;
  margin: 0;
  overflow: hidden;
  width: 100%;//550px;
  min-width: 550px;
  max-height: 100%;
  overflow-y: auto;
  scrollbar-width: thin;

  .header {
    background: #D9D9D9;
    // color: #222;
    font-weight: $font-weight-bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-left: $enemy-sheet-left-right-padding;
    padding-right: $enemy-sheet-left-right-padding;
    padding-top: 0.2rem;
    padding-bottom: 0.2rem;
    letter-spacing: 0.5px;
    border-radius: 6px 6px 0 0;
    margin-bottom: 0.15em;
    text-transform: uppercase;
    font-weight: $font-weight-bold;
    letter-spacing: 1px;

    .right {
      text-align: right;
      text-transform: unset;
    }

    &.ambusher {
      background: #F7D957;
    }
    &.artillery {
      background: #CCC0D9;
    }
    &.brute {
      background: #8DB3E2;
    }
    &.controller {
      background: #FF7D7D;
    }
    &.defender {
      background: #C4BC96;
    }
    &.harrier, &.skirmisher {
      background: #E5B8B7;
    }
    &.hexer {
      background: #D6E3BC;
    }
    &.mount {
      background: #B6DDE8;
    }
    &.support {
      background: #FBD4B4;
    }
  }

  .subheader-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding-left: $enemy-sheet-left-right-padding;
    padding-right: $enemy-sheet-left-right-padding;
    padding-top: 0rem;
    // color: #444;
    font-weight: $font-weight-normal;

    overflow-x: visible;
    white-space: pre;
    word-break: keep-all;

    .left {
      flex: 1;
    }

    .right {
      flex: 1;
      text-align: right;
    }

    .label {
      font-weight: $font-weight-bold;
      // align-items: baseline;
    }

    .value {
      font-weight: $font-weight-normal;
      margin-left: $label-value-gap;
    }
  }

  .ability {
    .subheader-row {
      .left {
        .label {
          font-style: italic;
        }
      }

      .signature {
        color: #0066bb;
      }

      .malice {
        color: #aa0066;
      }
    }

    .power-roll-section {
      .field-row {
        display: flex;
        padding-left: $enemy-sheet-left-right-padding;
        padding-right: $enemy-sheet-left-right-padding;
        white-space: pre;
        word-break: keep-all;
        overflow-x: visible;

        .label {
          font-weight: $font-weight-bold;
        }

        .value {
          font-weight: $font-weight-normal;
          margin-left: $label-value-gap;
        }
      }

      .power-roll-table {
        display: flex;
        flex-direction: column;
        // gap: 0.25rem; // vertical gap between rows, adjust as needed
        padding-left: 0.15em;
        width: max-content;

        .power-roll-tier {
          display: grid;
          grid-template-columns: 1.2em 2.8em 25em;
          align-items: normal;
          // Optionally: min-width for responsive design
          // min-width: 10em;

          .symbol {
            text-align: center;
          }

          .label {
            text-align: right;
            font-weight: $font-weight-half-bold;
          }

          .value {
            text-align: left;
            padding-left: 1em;
            font-weight: $font-weight-half-bold;
            color: #004477;

            .potency-effect {
              font-weight: $font-weight-half-bold;
              color: #ee0000;
            }
          }
        }
      }
    }

    .effect-field {
      padding-left: $enemy-sheet-left-right-padding;
      padding-right: $enemy-sheet-left-right-padding;
      word-break: break-word;

      .label {
        font-weight: $font-weight-bold;
        margin-right: $label-value-gap;
      }

      .value {
        font-weight: $font-weight-normal;
      }
    }
  }

  .divider {
    border-bottom: 1px solid #222;
    opacity: 0.4;
    padding-top: 0.3em;
    margin-bottom: 0.1em;
    width: 100%;
  }

  .columns {
    display: flex;
    gap: 0.5em;
    // flex-wrap: wrap;
    width: 100%;
    padding-bottom: 0.1rem;

    .column {
      flex: 1 1 0;
      min-width: 220px;
      max-width: 50%;
      display: flex;
      flex-direction: column;
    }

    .left-column {
      display: flex;
      align-items: flex-start;

      .field-row {
        padding-left: $enemy-sheet-left-right-padding;
      }
    }

    .right-column {
      display: flex;
      align-items: flex-end;

      .field-row {
        text-align: right;
        white-space: pre;
        padding-right: $enemy-sheet-left-right-padding;
      }
    }
  }

  .field-row {
    display: flex;
    align-items: baseline;

    .label {
      font-weight: $font-weight-bold;
      //white-space: pre;
    }

    .value {
      margin-left: $label-value-gap;
      font-weight: $font-weight-normal;
      //white-space: pre;
    }
  }

  .field-row.overflow {
    overflow-x: visible;
    white-space: pre;
    word-break: keep-all;
  }

  .characteristics-row {
    display: flex;
    justify-content: space-between;
    padding-left: $enemy-sheet-left-right-padding;
    padding-right: $enemy-sheet-left-right-padding;

    .characteristic {
      font-weight: $font-weight-bold;
      display: flex;
      align-items: baseline;
      white-space: nowrap;

      .value {
        font-weight: $font-weight-normal;
        margin-left: $label-value-gap;
      }
    }
  }
}





.ads-add-captain-to-squad,
.ads-add-minion-to-squad {
  color: #AAAAAA;
  cursor: pointer;
  transition: filter 0.15s;
  box-shadow: 0 0 10px var(--color-shadow-dark);
  background-color: var(--control-bg-color);
  border: 1px solid var(--control-border-color);
  width: var(--control-size);
  height: var(--control-size);
  justify-content: center;
}

.ads-add-captain-to-squad:hover,
.ads-add-minion-to-squad:hover {
  color: #FFFFFF;
  background-color: var(--control-active-bg-color);
  border-color: var(--control-hover-border-color);
  --control-icon-color: var(--control-active-icon-color);
  --control-hover-icon-color: var(--control-active-icon-color);
}

.react-root,
.minion-controls,
.ads-add-captain-to-squad,
.ads-add-minion-to-squad {
  z-index: 70;
  pointer-events: auto !important;
  position: relative;
}


// Power Roll Card

.draw-steel.power-roll-card {
  border: 2px solid var(--color-border-dark);
  border-radius: 12px;
  background: linear-gradient(135deg, var(--color-bg-light) 0%, var(--color-bg) 100%);
  padding: 16px;
  margin: 8px 0;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

  .card-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;

    .actor-portrait {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 2px solid var(--color-border);
      object-fit: cover;
    }

    .roll-info {
      flex: 1;

      .actor-name {
        margin: 0;
        font-size: 16px;
        font-weight: $font-weight-bold;
        color: var(--color-text-primary);
      }

      .roll-flavor {
        margin: 4px 0 0 0;
        font-style: italic;
        color: var(--color-text-secondary);
        font-size: 14px;
      }
    }

    .tier-display {
      position: relative;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: $font-weight-bold;
      font-size: 20px;
      color: white;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);

      &.tier-1 {
        background: linear-gradient(135deg, #8b4513, #a0522d);
        border: 2px solid #654321;
      }

      &.tier-2 {
        background: linear-gradient(135deg, #4682b4, #5a9bd4);
        border: 2px solid #2e5984;
      }

      &.tier-3 {
        background: linear-gradient(135deg, #ffd700, #ffed4e);
        border: 2px solid #ccac00;
        color: #333;
        text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
      }

      .tier-symbol {
        font-size: 24px;
      }

      .critical-star {
        position: absolute;
        top: -4px;
        right: -4px;
        color: gold;
        text-shadow: 0 0 4px rgba(255, 215, 0, 0.8);
        animation: pulse 2s infinite;
      }
    }
  }

  .roll-details {
    margin-bottom: 16px;

    .dice-display {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-bottom: 12px;

      .die {
        width: 36px;
        height: 36px;
        border: 2px solid var(--color-border);
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: $font-weight-bold;
        background: white;
        font-size: 16px;
        transition: all 0.2s ease;

        &.min {
          background: linear-gradient(135deg, #ff6b6b, #ff5252);
          color: white;
          border-color: #d32f2f;
        }

        &.max {
          background: linear-gradient(135deg, #51cf66, #4caf50);
          color: white;
          border-color: #2e7d32;
        }
      }
    }

    .calculation {
      text-align: center;
      font-size: 18px;
      margin-bottom: 12px;
      font-family: 'Roboto Mono', monospace;

      .dice-total,
      .bonus {
        color: var(--color-text-secondary);
      }

      .equals {
        margin: 0 8px;
        color: var(--color-text-secondary);
      }

      .total {
        font-weight: $font-weight-bold;
        font-size: 24px;
        color: var(--color-primary);
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      }
    }

    .edge-bane-effect {
      text-align: center;
      padding: 8px 12px;
      background: var(--color-bg-alt);
      border-radius: 6px;
      margin-bottom: 12px;
      border-left: 4px solid var(--color-primary);
      font-weight: $font-weight-normal;
    }

    .breakdown {
      font-size: 12px;
      color: var(--color-text-secondary);
      background: rgba(0, 0, 0, 0.05);
      border-radius: 4px;
      padding: 8px;

      .breakdown-item {
        margin: 2px 0;
        display: flex;
        justify-content: space-between;
      }
    }
  }

  .tier-result {
    border-top: 1px solid var(--color-border);
    padding-top: 16px;

    .tier-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;

      .tier-symbol-large {
        font-size: 24px;
        font-weight: bold;
        color: var(--color-primary);
      }

      .tier-label {
        font-weight: bold;
        color: var(--color-text-primary);
        font-size: 16px;
      }
    }

    .tier-description {
      background: var(--color-bg-alt);
      padding: 12px;
      border-radius: 6px;
      border-left: 4px solid var(--color-primary);
      font-size: 14px;
      line-height: 1.4;

      // Style for damage and status effects
      strong {
        color: var(--color-damage, #d32f2f);
      }

      // Style for conditions
      em {
        color: var(--color-condition, #7b1fa2);
        font-style: normal;
        font-weight: $font-weight-normal;
      }
    }
  }

  .card-footer {
    border-top: 1px solid var(--color-border-light);
    padding-top: 8px;
    margin-top: 12px;
    text-align: right;

    .timestamp {
      color: var(--color-text-secondary);
      font-size: 11px;
    }
  }
}

@keyframes pulse {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.7;
  }
}